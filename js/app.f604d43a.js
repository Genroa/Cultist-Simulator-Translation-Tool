(function(e){function t(t){for(var l,r,o=t[0],i=t[1],c=t[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],l=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(l=!1)}l&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var l={},a={app:0},s=[];function r(t){if(l[t])return l[t].exports;var n=l[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=l,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(n,l,function(t){return e[t]}.bind(null,l));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var l=n("8a23"),a=n.n(l);a.a},"56d7":function(e,t,n){"use strict";n.r(t);var l=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:""}},[n("div",{staticClass:"d-flex align-center"},[e._v(" Cultist Simulator Translator Tool ")])]),n("v-content",[n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{attrs:{cols:"4"}},[e._v(" New Version Files "),n("v-file-input",{attrs:{multiple:"",label:"New Version File",outlined:"",dense:""},on:{change:function(t){return e.loadFiles(t,"newVersionFiles")}}})],1),n("v-col",{attrs:{cols:"4"}},[e._v(" Current Version English core Files "),n("v-file-input",{attrs:{multiple:"",label:"Current Version File",outlined:"",dense:""},on:{change:function(t){return e.loadFiles(t,"currentVersionFiles")}}})],1),n("v-col",{attrs:{cols:"4"}},[e._v(" Current Version Translated core Files "),n("v-file-input",{attrs:{multiple:"",label:"Current Translation File",outlined:"",dense:""},on:{change:function(t){return e.loadFiles(t,"currentVersionTranslatedFiles")}}}),n("div",{staticClass:"text-center"},[n("v-btn",{attrs:{color:"primary"},on:{click:e.downloadTranslationZip}},[e._v("Download translation zip")])],1)],1)],1),n("v-row",{attrs:{wrapped:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[e._v("File name")]),n("th",[e._v("New version file")]),n("th",[e._v("Current version translated file differences")])])]),n("tbody",e._l(e.currentVersionFiles,(function(t){return n("tr",{key:t.name,staticStyle:{cursor:"pointer"},on:{click:function(n){return e.openTranslationDialog(t)}}},[n("td",[e._v(e._s(t.name))]),n("td"),e.untranslatedEntries[t.name].newFile?n("td",[e._v("New file, doesn't exist in translated core")]):e.untranslatedEntries[t.name].untranslated.length>0?n("td",[e._v(e._s(e.untranslatedEntries[t.name].untranslated.length)+" untranslated entries")]):n("td",{staticClass:"translated"},[e._v("All translated! ")])])})),0)]},proxy:!0}])})],1)],1)],1),n("v-dialog",{attrs:{height:"900"},model:{value:e.translationDialog,callback:function(t){e.translationDialog=t},expression:"translationDialog"}},[n("v-card",[e.fileToTranslate?n("v-card-title",[e._v(e._s(e.fileToTranslate.name))]):e._e(),n("v-card-text",[e.fileToTranslate?n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"dialogScrollContainer",attrs:{cols:"3"}},e._l(e.getElements(e.currentVersionFiles.find((function(t){return t.name===e.fileToTranslate.name})).obj).map((function(e){return e.id})),(function(t){return n("v-list-item",{key:t,class:{selectedElement:t===e.displayedElementId},on:{click:function(n){return e.showElement(t)}}},[n("v-list-item-content",[n("v-list-item-title",{class:e.computeTranslationColor(t)},[e._v(e._s(t))])],1)],1)})),1),e.displayedElementId?n("v-col",{staticClass:"dialogScrollContainer"},[n("TranslationPanel",{attrs:{title:"Original Text",element:e.elementToTranslate,readonly:!0}})],1):e._e(),e.displayedElementId?n("v-col",{staticClass:"dialogScrollContainer"},[n("TranslationPanel",{attrs:{title:"Translated Content",element:e.translatedElement,"original-element":e.elementToTranslate,"translation-map":e.translationMap}})],1):e._e()],1)],1):e._e()],1)],1)],1)],1)],1)},s=[],r=(n("e01a"),n("e260"),n("c1f9"),n("2532"),n("ddb0"),n("c4e3")),o=n.n(r),i=n("21a6"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"mb-2",attrs:{cols:"12"}},[e._v(e._s(e.title))]),n("v-col",{staticClass:"py-0",attrs:{cols:e.readonly?12:11}},[n("v-textarea",{attrs:{readonly:e.readonly,dense:"",label:"Label",outlined:"","no-resize":"",rows:"2"},model:{value:e.element.label,callback:function(t){e.$set(e.element,"label",t)},expression:"element.label"}})],1),e.readonly?e._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":e.translationMap,"translation-key":e.originalElement.label},on:{click:function(t){e.element.label=t}}})],1),n("v-col",{staticClass:"py-0",attrs:{cols:e.readonly?12:11}},[n("v-textarea",{attrs:{readonly:e.readonly,dense:"",label:"Description",outlined:"","no-resize":"",rows:"4"},model:{value:e.element.description,callback:function(t){e.$set(e.element,"description",t)},expression:"element.description"}})],1),e.readonly?e._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":e.translationMap,"translation-key":e.originalElement.description},on:{click:function(t){e.element.description=t}}})],1),e.element.slots?e._l(e.element.slots,(function(t,l){return n("v-col",{key:l,staticClass:"py-0",attrs:{cols:"12"}},[n("v-container",{staticClass:"py-0"},[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"mb-2 py-0",attrs:{cols:"12"}},[e._v("Slot "+e._s(l+1))]),n("v-col",{staticClass:"py-0",attrs:{cols:e.readonly?12:11}},[t.label?n("v-text-field",{attrs:{readonly:e.readonly,dense:"",outlined:"",label:"Label"},model:{value:t.label,callback:function(n){e.$set(t,"label",n)},expression:"slot.label"}}):e._e()],1),e.readonly||void 0===t.label?e._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":e.translationMap,"translation-key":e.originalElement.slots[l].label},on:{click:function(e){t.label=e}}})],1),n("v-col",{staticClass:"py-0",attrs:{cols:e.readonly?12:11}},[t.description?n("v-text-field",{attrs:{readonly:e.readonly,dense:"",outlined:"",label:"Description"},model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"slot.description"}}):e._e()],1),e.readonly||void 0===t.description?e._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":e.translationMap,"translation-key":e.originalElement.slots[l].description},on:{click:function(e){t.description=e}}})],1)],1)],1)],1)})):e._e()],2)],1)},d=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.translationMap[e.translationKey],expression:"translationMap[translationKey] !== undefined"}],attrs:{color:"primary",small:""},on:{click:function(t){return e.$emit("click",e.translationMap[e.translationKey])}}},[n("v-icon",[e._v("mdi-translate")])],1)},p=[],f={props:["translationMap","translationKey"],created(){console.log(this.translationMap,this.translationKey,this.translationMap[this.translationKey])}},v=f,m=n("2877"),b=n("6544"),h=n.n(b),y=n("8336"),g=n("132d"),T=Object(m["a"])(v,u,p,!1,null,null,null),w=T.exports;h()(T,{VBtn:y["a"],VIcon:g["a"]});var F={components:{PreviousTranslationButton:w},props:["title","element","readonly","originalElement","translationMap"]},_=F,E=n("62ad"),V=n("a523"),C=n("0fd9"),k=n("8654"),x=n("a844"),j=Object(m["a"])(_,c,d,!1,null,null,null),O=j.exports;h()(j,{VCol:E["a"],VContainer:V["a"],VRow:C["a"],VTextField:k["a"],VTextarea:x["a"]});var M={name:"App",components:{TranslationPanel:O},data:()=>({newVersionFiles:[],currentVersionFiles:[],currentVersionTranslatedFiles:[],translationDialog:!1,fileToTranslate:null,translatedFile:null,displayedElementId:null}),computed:{untranslatedEntries(){const e=this.buildEntryForEachFile(this.currentVersionFiles,()=>({newFile:!1,newEntries:[],untranslated:[]}));for(const t of this.currentVersionFiles){const n=this.currentVersionTranslatedFiles.find(e=>e.name===t.name);if(n)for(const l of this.getElements(t.obj)){const a=this.getElements(n.obj).find(e=>e.id===l.id);if(a){if(a.description===l.description&&a.label===l.label)if(l.slots){for(let n=0;n<l.slots.length;n++)if(l.slots[n].label===a.slots[n].label&&l.slots[n].description===a.slots[n].description){e[t.name].untranslated.push(l.id);break}}else e[t.name].untranslated.push(l.id)}else e[t.name].newEntries.push(l.id)}else e[t.name].newFile=!0}return e},elementToTranslate(){return this.displayedElementId&&this.fileToTranslate?this.getElements(this.fileToTranslate.obj).find(e=>e.id===this.displayedElementId):null},translatedElement(){return this.displayedElementId&&this.translatedFile?this.getElements(this.translatedFile.obj).find(e=>e.id===this.displayedElementId):null},translationMap(){const e={};for(const t of this.currentVersionFiles){const n=this.currentVersionTranslatedFiles.find(e=>e.name===t.name);if(n)for(const l of this.getElements(t.obj)){const t=this.getElements(n.obj).find(e=>e.id===l.id);if(t&&(t.description!==l.description&&(e[l.description]=t.description),t.label!==l.label&&(e[l.label]=t.label),l.slots))for(let n=0;n<l.slots.length;n++)l.slots[n].label!==t.slots[n].label&&(e[l.slots[n].label]=t.slots[n].label),l.slots[n].description!==t.slots[n].description&&(e[l.slots[n].description]=t.slots[n].description)}}return e}},methods:{getElements(e){var t,n,l,a,s;return null!==(t=null!==(n=null!==(l=null!==(a=null!==(s=e.decks)&&void 0!==s?s:e.elements)&&void 0!==a?a:e.endings)&&void 0!==l?l:e.legacies)&&void 0!==n?n:e.recipes)&&void 0!==t?t:e.verbs},buildEntryForEachFile(e,t){return Object.fromEntries(e.map(e=>[e.name,t()]))},loadFiles(e,t){this[t]=[];for(const n of e){const e=new FileReader;e.onload=e=>{const l=JSON.parse(e.target.result);this[t].push({name:n.name,obj:l})},e.readAsText(n)}},openTranslationDialog(e){this.fileToTranslate=e,this.translatedFile=this.currentVersionTranslatedFiles.find(t=>t.name===e.name),this.translationDialog=!0},showElement(e){this.displayedElementId=e},computeTranslationColor(e){const t=this.untranslatedEntries[this.fileToTranslate.name].untranslated.includes(e);return{untranslated:t,translated:!t}},downloadTranslationZip(){var e=new o.a;for(const t of this.currentVersionTranslatedFiles)e.file(t.name,JSON.stringify(t.obj,void 0,2));e.generateAsync({type:"blob"}).then((function(e){Object(i["saveAs"])(e,"translations.zip")}))}}},S=M,P=(n("034f"),n("7496")),I=n("40dc"),A=n("b0af"),D=n("99d9"),B=n("a75b"),N=n("169a"),$=n("23a7"),K=n("da13"),L=n("5d23"),z=n("1f4f"),J=Object(m["a"])(S,a,s,!1,null,null,null),R=J.exports;h()(J,{VApp:P["a"],VAppBar:I["a"],VBtn:y["a"],VCard:A["a"],VCardText:D["a"],VCardTitle:D["b"],VCol:E["a"],VContainer:V["a"],VContent:B["a"],VDialog:N["a"],VFileInput:$["a"],VListItem:K["a"],VListItemContent:L["a"],VListItemTitle:L["b"],VRow:C["a"],VSimpleTable:z["a"]});var Z=n("9483");Object(Z["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var q=n("f309");l["a"].use(q["a"]);var G=new q["a"]({theme:{themes:{light:{primary:"#00a39e",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});l["a"].config.productionTip=!1,new l["a"]({vuetify:G,render:e=>e(R)}).$mount("#app")},"8a23":function(e,t,n){}});
//# sourceMappingURL=app.f604d43a.js.map