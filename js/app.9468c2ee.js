(function(t){function e(e){for(var a,o,r=e[0],s=e[1],c=e[2],u=0,f=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&f.push(l[o][0]),l[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==l[s]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},l={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Cultist-Simulator-Translation-Tool/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("8a23"),l=n.n(a);l.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",dark:"",color:"primary"}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:t.publicPath+"img/icons/icon-152x152.png",transition:"scale-transition",width:"40"}}),t._v(" Cultist Simulator Translation Tool ")],1),n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(e){t.howToUseDialog=!0}}},[t._v("Help")])],1),n("v-content",[n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[t._v(" New Version Files "),n("v-file-input",{attrs:{multiple:"",label:"New Version File",outlined:"",dense:""},on:{change:function(e){return t.loadFiles(e,"newVersionFiles")}}})],1),n("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[t._v(" Current Version English core Files "),n("v-file-input",{attrs:{multiple:"",label:"Current Version File",outlined:"",dense:""},on:{change:function(e){return t.loadFiles(e,"currentVersionFiles")}}})],1),n("v-col",{staticClass:"text-center",attrs:{cols:"4"}},[t._v(" Current Version Translated core Files "),n("v-file-input",{attrs:{multiple:"",label:"Current Translation File",outlined:"",dense:""},on:{change:function(e){return t.loadFiles(e,"currentVersionTranslatedFiles")}}}),n("div",{staticClass:"text-center"},[n("v-btn",{attrs:{color:"primary"},on:{click:t.downloadTranslationZip}},[n("v-icon",[t._v("mdi-download")])],1)],1)],1)],1),n("v-row",{attrs:{wrapped:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[t._v("File name")]),n("th",[t._v("New version file")]),n("th",[t._v("Current version translated file differences")])])]),n("tbody",t._l(t.currentVersionFiles,(function(e){return n("tr",{key:e.name,staticStyle:{cursor:"pointer"},on:{click:function(n){return t.openTranslationDialog(e)}}},[n("td",[t._v(t._s(e.name))]),n("td"),t.untranslatedEntries[e.name].newFile?n("td",[t._v("New file, doesn't exist in translated core")]):n("td",{class:t.computeFileColor(e)},[t._v(t._s(t.getElements(e.obj).length-t.untranslatedEntries[e.name].untranslated.length)+"/"+t._s(t.getElements(e.obj).length))])])})),0)]},proxy:!0}])})],1)],1)],1),n("v-dialog",{attrs:{height:"900"},model:{value:t.translationDialog,callback:function(e){t.translationDialog=e},expression:"translationDialog"}},[n("v-card",[t.fileToTranslate?n("v-card-title",[t._v(t._s(t.fileToTranslate.name))]):t._e(),n("v-card-text",[t.fileToTranslate?n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"dialogScrollContainer",attrs:{cols:"3"}},t._l(t.getElements(t.currentVersionFiles.find((function(e){return e.name===t.fileToTranslate.name})).obj).map((function(t){return t.id})).sort(),(function(e){return n("v-list-item",{key:e,class:{selectedElement:e===t.displayedElementId},on:{click:function(n){return t.showElement(e)}}},[n("v-list-item-content",[n("v-list-item-title",{class:t.computeTranslationColor(e)},[t._v(t._s(e))])],1)],1)})),1),t.displayedElementId?n("v-col",{staticClass:"dialogScrollContainer"},[n("TranslationPanel",{attrs:{title:"Original Text",element:t.elementToTranslate,readonly:!0}})],1):t._e(),t.displayedElementId?n("v-col",{staticClass:"dialogScrollContainer"},[n("TranslationPanel",{attrs:{title:"Translated Content",element:t.translatedElement,"original-element":t.elementToTranslate,"translation-map":t.translationMap}})],1):t._e()],1)],1):t._e()],1)],1)],1),n("HowToUseDialog",{model:{value:t.howToUseDialog,callback:function(e){t.howToUseDialog=e},expression:"howToUseDialog"}})],1),n("v-footer",{attrs:{app:""}},[n("div",{staticClass:"caption"},[t._v(" Cultist Simulator Translation Tool is an unofficial tool for Cultist Simulator. All rights, data, & pictures used here belong to Weather Factory. ")]),n("v-spacer"),n("div",{staticClass:"caption"},[t._v("Made with "),n("v-icon",{attrs:{small:"",color:"primary"}},[t._v("mdi-heart")]),t._v(" by Genroa")],1)],1)],1)},i=[],o=(n("a4d3"),n("e01a"),n("7db0"),n("caad"),n("d81d"),n("b0c0"),n("c1f9"),n("2532"),n("b85c")),r=n("c4e3"),s=n.n(r),c=n("21a6"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"mb-2",attrs:{cols:"12"}},[t._v(t._s(t.title))]),void 0!==t.element.label?n("v-col",{staticClass:"py-0",attrs:{cols:t.readonly?12:11}},[n("v-textarea",{attrs:{readonly:t.readonly,dense:"",label:"Label",outlined:"","no-resize":"",rows:"2"},model:{value:t.element.label,callback:function(e){t.$set(t.element,"label",e)},expression:"element.label"}})],1):t._e(),t.readonly||void 0===t.element.label?t._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":t.translationMap,"translation-key":t.originalElement.label},on:{click:function(e){t.element.label=e}}})],1),void 0!==t.element.startdescription?n("v-col",{staticClass:"py-0",attrs:{cols:t.readonly?12:11}},[n("v-textarea",{attrs:{readonly:t.readonly,dense:"",label:"Start Description",outlined:"","no-resize":"",rows:"4"},model:{value:t.element.startdescription,callback:function(e){t.$set(t.element,"startdescription",e)},expression:"element.startdescription"}})],1):t._e(),t.readonly||void 0===t.element.startdescription?t._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":t.translationMap,"translation-key":t.originalElement.startdescription},on:{click:function(e){t.element.startdescription=e}}})],1),void 0!==t.element.description?n("v-col",{staticClass:"py-0",attrs:{cols:t.readonly?12:11}},[n("v-textarea",{attrs:{readonly:t.readonly,dense:"",label:"Description",outlined:"","no-resize":"",rows:"4"},model:{value:t.element.description,callback:function(e){t.$set(t.element,"description",e)},expression:"element.description"}})],1):t._e(),t.readonly||void 0===t.element.description?t._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":t.translationMap,"translation-key":t.originalElement.description},on:{click:function(e){t.element.description=e}}})],1),t.element.slots?t._l(t.element.slots,(function(e,a){return n("v-col",{key:a,staticClass:"py-0",attrs:{cols:"12"}},[n("v-container",{staticClass:"py-0"},[n("v-row",{attrs:{wrapped:""}},[n("v-col",{staticClass:"mb-2 py-0",attrs:{cols:"12"}},[t._v("Slot "+t._s(a+1))]),n("v-col",{staticClass:"py-0",attrs:{cols:t.readonly?12:11}},[e.label?n("v-text-field",{attrs:{readonly:t.readonly,dense:"",outlined:"",label:"Label"},model:{value:e.label,callback:function(n){t.$set(e,"label",n)},expression:"slot.label"}}):t._e()],1),t.readonly||void 0===e.label?t._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":t.translationMap,"translation-key":t.originalElement.slots[a].label},on:{click:function(t){e.label=t}}})],1),n("v-col",{staticClass:"py-0",attrs:{cols:t.readonly?12:11}},[e.description?n("v-text-field",{attrs:{readonly:t.readonly,dense:"",outlined:"",label:"Description"},model:{value:e.description,callback:function(n){t.$set(e,"description",n)},expression:"slot.description"}}):t._e()],1),t.readonly||void 0===e.description?t._e():n("v-col",{attrs:{cols:"1"}},[n("PreviousTranslationButton",{attrs:{"translation-map":t.translationMap,"translation-key":t.originalElement.slots[a].description},on:{click:function(t){e.description=t}}})],1)],1)],1)],1)})):t._e()],2)],1)},u=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{directives:[{name:"show",rawName:"v-show",value:void 0!==t.translationMap[t.translationKey],expression:"translationMap[translationKey] !== undefined"}],attrs:{color:"primary",small:""},on:{click:function(e){return t.$emit("click",t.translationMap[t.translationKey])}}},[n("v-icon",[t._v("mdi-translate")])],1)},p=[],v={props:["translationMap","translationKey"]},m=v,h=n("2877"),b=n("6544"),g=n.n(b),y=n("8336"),w=n("132d"),T=Object(h["a"])(m,f,p,!1,null,null,null),_=T.exports;g()(T,{VBtn:y["a"],VIcon:w["a"]});var C={components:{PreviousTranslationButton:_},props:["title","element","readonly","originalElement","translationMap"]},F=C,V=n("62ad"),E=n("a523"),x=n("0fd9"),k=n("8654"),j=n("a844"),O=Object(h["a"])(F,d,u,!1,null,null,null),S=O.exports;g()(O,{VCol:V["a"],VContainer:E["a"],VRow:x["a"],VTextField:k["a"],VTextarea:j["a"]});var D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,height:"900"},on:{input:function(e){return t.$emit("input",!1)}}},[n("v-card",[n("v-card-title",[t._v("Help")]),n("v-card-text",[n("div",{staticClass:"title mt-5"},[t._v("How to use")]),n("ul",[n("li",[t._v("Before using this tool, use the modding tool to produce clean versions of the core files. One for the original version, and one for the translated version.")]),n("li",[t._v("Left file input doesn't do anything for now.")]),n("li",[t._v("Select the files you want to translate in the middle and right file inputs. Select the same files but for the original and translated core.")]),n("li",[t._v("Each file will then show up in the table. On the right, it tells you if the file exists in the translated selectection, and how many elements are still untranslated.")]),n("li",[t._v("Click on a line to open the translation edit for this file.")]),n("li",[t._v("Select an element on the left, translate it in the right panel.")]),n("li",[t._v("When you're done and want to save, click on the download button below the translated files input.")])]),n("div",{staticClass:"title mt-5"},[t._v("How to use offline")]),n("ul",[n("li",[t._v("This website is a PWA. You can install it to use offline by clicking on the '+' button on the upper right part of the url bar (in Chrome)")]),n("li",[t._v("When installed, it can be executed directly via a shortcut on the desktop and will run in a dedicated window, out of the browser.")])]),n("div",{staticClass:"title mt-5"},[t._v('The "Insert translation" button')]),n("ul",[n("li",[t._v("Next to translation fields, you can often see a button. This is used to insert an already existing translation matching the exact original text.")]),n("li",[t._v("The way this works is it computes a big map of all existing translations, and if the same original text is found, displays the button. For now, this can heavily impact performance when working with a big amount of files/elements. I'm still working on this.")])]),n("div",{staticClass:"title mt-5"},[t._v("Limitations")]),n("ul",[n("li",[t._v(" The translations map being computed from the loaded files, if an identical translation exists somewhere else in an unloaded file, it can't be known and won't be used by the tool. ")]),n("li",[t._v(" The way the tool detects if any element was translated is by detecting if the description and labels are identical or not. If it is, it checks the slots. Any difference will count as a valid translation, because it can't guess when some languages will translate a word by an identical word. ")])])])],1)],1)},I=[],P={props:["value"]},M=P,A=n("b0af"),B=n("99d9"),$=n("169a"),N=Object(h["a"])(M,D,I,!1,null,null,null),L=N.exports;g()(N,{VCard:A["a"],VCardText:B["a"],VCardTitle:B["b"],VDialog:$["a"]});var U={name:"App",components:{HowToUseDialog:L,TranslationPanel:S},data:function(){return{publicPath:"/Cultist-Simulator-Translation-Tool/",newVersionFiles:[],currentVersionFiles:[],currentVersionTranslatedFiles:[],translationDialog:!1,fileToTranslate:null,translatedFile:null,displayedElementId:null,howToUseDialog:!1}},computed:{untranslatedEntries:function(){var t,e=this,n=this.buildEntryForEachFile(this.currentVersionFiles,(function(){return{newFile:!1,newEntries:[],untranslated:[]}})),a=Object(o["a"])(this.currentVersionFiles);try{var l=function(){var a=t.value,l=e.currentVersionTranslatedFiles.find((function(t){return t.name===a.name}));if(!l)return n[a.name].newFile=!0,"continue";var i,r=Object(o["a"])(e.getElements(a.obj));try{var s=function(){var t=i.value,o=e.getElements(l.obj).find((function(e){return e.id===t.id}));if(!o)return n[a.name].newEntries.push(t.id),"continue";if(o.startdescription!==t.startdescription||o.description!==t.description||o.label!==t.label)return"continue";if(!t.slots)return n[a.name].untranslated.push(t.id),"continue";for(var r=0;r<t.slots.length;r++)if(t.slots[r].label===o.slots[r].label&&t.slots[r].description===o.slots[r].description){n[a.name].untranslated.push(t.id);break}};for(r.s();!(i=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}};for(a.s();!(t=a.n()).done;)l()}catch(i){a.e(i)}finally{a.f()}return n},elementToTranslate:function(){var t=this;return this.displayedElementId&&this.fileToTranslate?this.getElements(this.fileToTranslate.obj).find((function(e){return e.id===t.displayedElementId})):null},translatedElement:function(){var t=this;return this.displayedElementId&&this.translatedFile?this.getElements(this.translatedFile.obj).find((function(e){return e.id===t.displayedElementId})):null},translationMap:function(){var t,e=this,n={},a=Object(o["a"])(this.currentVersionFiles);try{var l=function(){var a=t.value,l=e.currentVersionTranslatedFiles.find((function(t){return t.name===a.name}));if(!l)return"continue";var i,r=Object(o["a"])(e.getElements(a.obj));try{var s=function(){var t=i.value,a=e.getElements(l.obj).find((function(e){return e.id===t.id}));if(!a)return"continue";if(a.startdescription!==t.startdescription&&(n[t.startdescription]=a.startdescription),a.description!==t.description&&(n[t.description]=a.description),a.label!==t.label&&(n[t.label]=a.label),!t.slots)return"continue";for(var o=0;o<t.slots.length;o++)t.slots[o].label!==a.slots[o].label&&(n[t.slots[o].label]=a.slots[o].label),t.slots[o].description!==a.slots[o].description&&(n[t.slots[o].description]=a.slots[o].description)};for(r.s();!(i=r.n()).done;)s()}catch(c){r.e(c)}finally{r.f()}};for(a.s();!(t=a.n()).done;)l()}catch(i){a.e(i)}finally{a.f()}return n}},methods:{getElements:function(t){var e,n,a,l,i;return null!==(e=null!==(n=null!==(a=null!==(l=null!==(i=t.decks)&&void 0!==i?i:t.elements)&&void 0!==l?l:t.endings)&&void 0!==a?a:t.legacies)&&void 0!==n?n:t.recipes)&&void 0!==e?e:t.verbs},buildEntryForEachFile:function(t,e){return Object.fromEntries(t.map((function(t){return[t.name,e()]})))},loadFiles:function(t,e){var n=this;this[e]=[];var a,l=Object(o["a"])(t);try{var i=function(){var t=a.value,l=new FileReader;l.onload=function(a){var l=JSON.parse(a.target.result);n[e].push({name:t.name,obj:l})},l.readAsText(t)};for(l.s();!(a=l.n()).done;)i()}catch(r){l.e(r)}finally{l.f()}},openTranslationDialog:function(t){this.fileToTranslate=t,this.translatedFile=this.currentVersionTranslatedFiles.find((function(e){return e.name===t.name})),this.translationDialog=!0},showElement:function(t){this.displayedElementId=t},computeTranslationColor:function(t){var e=this.untranslatedEntries[this.fileToTranslate.name].untranslated.includes(t);return{untranslated:e,translated:!e}},computeFileColor:function(t){var e=this.untranslatedEntries[t.name].untranslated.length===this.getElements(t.obj).length,n=this.untranslatedEntries[t.name].untranslated.length>0;return{untranslated:e,translating:!e&&n,translated:!n}},downloadTranslationZip:function(){var t,e=new s.a,n=Object(o["a"])(this.currentVersionTranslatedFiles);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.file(a.name,JSON.stringify(a.obj,void 0,2))}}catch(l){n.e(l)}finally{n.f()}e.generateAsync({type:"blob"}).then((function(t){Object(c["saveAs"])(t,"translations.zip")}))}}},H=U,z=(n("034f"),n("7496")),J=n("40dc"),K=n("a75b"),W=n("23a7"),R=n("553a"),Z=n("adda"),q=n("da13"),G=n("5d23"),Y=n("1f4f"),Q=n("2fa4"),X=Object(h["a"])(H,l,i,!1,null,null,null),tt=X.exports;g()(X,{VApp:z["a"],VAppBar:J["a"],VBtn:y["a"],VCard:A["a"],VCardText:B["a"],VCardTitle:B["b"],VCol:V["a"],VContainer:E["a"],VContent:K["a"],VDialog:$["a"],VFileInput:W["a"],VFooter:R["a"],VIcon:w["a"],VImg:Z["a"],VListItem:q["a"],VListItemContent:G["a"],VListItemTitle:G["b"],VRow:x["a"],VSimpleTable:Y["a"],VSpacer:Q["a"]});var et=n("9483");Object(et["a"])("".concat("/Cultist-Simulator-Translation-Tool/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var nt=n("f309");a["a"].use(nt["a"]);var at=new nt["a"]({theme:{themes:{light:{primary:"#00695C",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}});a["a"].config.productionTip=!1,new a["a"]({vuetify:at,render:function(t){return t(tt)}}).$mount("#app")},"8a23":function(t,e,n){}});
//# sourceMappingURL=app.9468c2ee.js.map